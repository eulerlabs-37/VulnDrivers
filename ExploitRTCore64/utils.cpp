#include <Windows.h>

#include <stdio.h>

size_t convertWideString(char* cString, wchar_t* wString, size_t length) {
	// Convert to narrow C string TODO put in utils
	size_t written = wcstombs(cString, wString, length);
	cString[length/2] = '\0';
	return written;
}
void displayMemoryDump(const BYTE* memory, size_t size) {
	size_t i, j;

	for (i = 0; i < size; i += 16) {
		// Print 16 bytes in hex (grouped in 4-byte chunks)
		for (j = 0; j < 16 && i + j < size; j += 4) {
			printf("%02X%02X%02X%02X ", memory[i + j], memory[i + j + 1], memory[i + j + 2], memory[i + j + 3]);
		}

		// Fill the remainder with spaces if we're at the end of the dump and don't have a full 16 bytes
		for (; j < 16; j += 4) {
			printf("         ");
		}

		// Print corresponding ASCII characters on the right
		printf("| ");
		for (j = 0; j < 16 && i + j < size; j++) {
			BYTE byte = memory[i + j];
			if (isprint(byte)) {
				printf("%c", byte);  // Print printable character
			}
			else {
				printf(".");  // Non-printable characters as '.'
			}
		}

		printf("\n");
	}
}
